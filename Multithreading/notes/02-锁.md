# 锁
内部锁（互斥锁），java提供了强制原子性的内置锁机制：synchronized 块。

操作共享状态的复合操作必须是原子的，以避免竞争条件，比如读-改-写操作和检查再运行操作。复合操作会在完整的运行期占有锁，以确保其行为为原子的。

## 重进入问题
- synchronized修饰类中static方法那么所有对象共享一把锁。
- synchronized修饰类中普通方法那么单个对象共用一把锁。

怎么理解这个锁？？？一个对象一把锁还是一个线程一把锁。！！！
>　　因为内置锁是可重入的，所以如果某个线程试图获得一个已经由它自己持有的锁，那么这个请求就会成功。
　　重入意味着获取锁的操作粒度是“线程”，而不是“调用”。   
　　实现方式：为每个锁关联一个获取计数值和一个所有者线程。当计数值为0时，这个锁被认为没有被任何线程持有。当线程请求一个未被持有的锁时，JVM将记下锁的持有者，并且将获取计数值置为1。如果同一个线程再次获取这个锁，计数值将递增，而当线程退出同步代码块时，计数值减1。
重入提升了加锁行为的封装性，因此简化了面向对象并发代码的执行。
## 用锁来保护状态
## 活跃度和性能
